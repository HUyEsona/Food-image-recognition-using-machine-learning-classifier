<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Food Recognition</title>
    <!-- Link CSS -->
    <link rel="stylesheet" href="../CSS/style.css">
</head>
<body>
<!-- ================= HEADER + NAV ================= -->
<div class="header" id="home">
    <div class="header-content">
        <div class="logo">
            <div class="icon-box">üç¥</div>
            <h1 class="title">Food Recognition</h1>
        </div>
        
        <nav class="nav-menu">
            <a href="../navigation_menu/index.html" class="active">Trang ch·ªß</a>
            <a href="../navigation_menu/about.html">Gi·ªõi thi·ªáu</a>
            <a href="../navigation_menu/reason.html">L√Ω do</a>
            <a href="../navigation_menu/contact.html">Li√™n h·ªá</a>
        </nav>
    </div>
</div>
<!-- ================= MAIN ================= -->
<div class="container">
    <div class="main-layout">

        <!-- Banner -->
        <div class="banner">
            <h2 class="banner-title">
                Hi·ªÉu m√≥n ƒÉn c·ªßa b·∫°n ƒë·ªÉ s·ªëng kh·ªèe h∆°n!
            </h2>
        </div>

        <!-- Upload content -->
        <div class="content">
            <div id="uploadSection">
                <div class="upload-text upload-title">
                    Ch·ªçn lo·∫°i ·∫£nh b·∫°n mu·ªën ph√¢n t√≠ch:
                </div>

                <div class="upload-type">
                    <div class="upload-option" onclick="selectType(this, 'ingredient')">
                        <div class="option-title">Th·ª±c ph·∫©m</div>
                    </div>
                    <div class="upload-option" onclick="selectType(this, 'dish')">
                        <div class="option-title">M√≥n ƒÉn</div>
                    </div>
                </div>

                <div class="upload-btn"
                     onclick="document.getElementById('fileInput').click()">
                    Ch·ªçn ·∫£nh
                </div>

                <div class="upload-text">Nh·∫•n ƒë·ªÉ ch·ªçn ·∫£nh</div>

                <input type="file" id="fileInput" accept="image/*" />
            </div>

            <div id="previewSection" class="card-image hidden">
                <img id="previewImage" class="image" alt="Preview" />
                <div class="button-row">
                    <button class="btn btn-success" onclick="analyzeFood()">Ph√¢n t√≠ch</button>
                    <button class="btn btn-gray" onclick="reset()">H·ªßy</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ================= SCRIPT ================= -->
<script>
    let currentImage = null;
    let selectedType = null;

    function selectType(element, type) {
        document.querySelectorAll('.upload-option').forEach(opt => {
            opt.classList.remove('selected');
        });
        element.classList.add('selected');
        selectedType = type;
    }

    document.getElementById('fileInput').addEventListener('change', function (e) {
        const file = e.target.files[0];
        if (file) {
            if (!selectedType) {
                alert('Vui l√≤ng ch·ªçn lo·∫°i ·∫£nh tr∆∞·ªõc!');
                return;
            }
            const reader = new FileReader();
            reader.onload = function (event) {
                currentImage = event.target.result;
                document.getElementById('previewImage').src = currentImage;
                document.getElementById('uploadSection').classList.add('hidden');
                document.getElementById('previewSection').classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        }
    });

    function analyzeFood() {
        console.log('Ph√¢n t√≠ch lo·∫°i:', selectedType);
    }

    function reset() {
        currentImage = null;
        selectedType = null;
        document.getElementById('fileInput').value = '';
        document.querySelectorAll('.upload-option').forEach(opt => {
            opt.classList.remove('selected');
        });
        document.getElementById('uploadSection').classList.remove('hidden');
        document.getElementById('previewSection').classList.add('hidden');
    }
</script>
</body>
</html>
